<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R-page 英語網站生成助手</title>
    
    <!-- 1. 載入 Tailwind CSS (樣式庫) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. 載入 React 和 Babel (核心運作庫) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background-color: #f1f5f9; }
        /* 簡單的預覽區樣式重置，避免與工具本身的 CSS 衝突 */
        .preview-container h1, .preview-container h2, .preview-container h3 { all: revert; }
        .preview-container ul, .preview-container ol { all: revert; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- 簡易圖示元件 (取代 Lucide-React 以方便單檔執行) ---
        const IconLayout = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><line x1="3" x2="21" y1="9" y2="9"/><line x1="9" x2="9" y1="21" y2="9"/></svg>;
        const IconCode = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>;
        const IconEye = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>;
        const IconCopy = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>;
        const IconImage = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>;
        const IconYoutube = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17"/><path d="m10 15 5-3-5-3z"/></svg>;
        const IconLink = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>;

        const SchoolWebGenerator = () => {
            const [activeTab, setActiveTab] = useState('generator');
            const [pageType, setPageType] = useState('info');
            
            // Input States
            const [title, setTitle] = useState('');
            const [content, setContent] = useState('');
            const [images, setImages] = useState('');
            const [youtube, setYoutube] = useState('');
            const [links, setLinks] = useState('');
            
            // Output State
            const [generatedPrompt, setGeneratedPrompt] = useState('');
            const [previewHtml, setPreviewHtml] = useState('');
            const [copyStatus, setCopyStatus] = useState('Copy Prompt');

            // Styles definition
            const styleGuide = `
/* Modern Clean Style for School Website */
.r-page-content { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; line-height: 1.6; color: #333; max-width: 100%; overflow-x: hidden; }
.r-section { margin-bottom: 2rem; padding: 1.5rem; background: #fff; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
.r-title { color: #1a5f7a; font-size: 1.8rem; border-bottom: 2px solid #1a5f7a; padding-bottom: 0.5rem; margin-bottom: 1.5rem; font-weight: 700; }
.r-text { font-size: 1.1rem; margin-bottom: 1rem; text-align: justify; }
.r-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-top: 1.5rem; }
.r-card { background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 6px; overflow: hidden; transition: transform 0.2s; }
.r-card:hover { transform: translateY(-3px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
.r-img-container { width: 100%; height: 200px; overflow: hidden; }
.r-img { width: 100%; height: 100%; object-fit: cover; }
.r-video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 8px; margin-bottom: 1.5rem; }
.r-video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
.r-link-btn { display: inline-block; padding: 0.5rem 1.5rem; background-color: #1a5f7a; color: white !important; text-decoration: none; border-radius: 4px; margin-top: 1rem; transition: background 0.3s; }
.r-link-btn:hover { background-color: #134b61; }
            `;

            const generatePromptText = () => {
                let prompt = `Role: You are an expert bilingual web developer for a university/school website.\n`;
                prompt += `Task: Convert the following CHINESE content into PROFESSIONAL ACADEMIC ENGLISH HTML code.\n`;
                prompt += `Constraint: The output must be raw HTML (no <html>, <head>, or <body> tags) suitable for embedding in a CMS content block.\n`;
                prompt += `Style: Use inline CSS or the provided CSS classes. Do not use external frameworks like Bootstrap unless via inline styles.\n\n`;
                
                prompt += `--- STYLE GUIDE (Include this CSS in a <style> block at the top) ---\n`;
                prompt += `${styleGuide}\n`;
                prompt += `------------------------------------------------------------\n\n`;

                prompt += `--- SOURCE CONTENT (CHINESE) ---\n`;
                prompt += `Page Type: ${pageType === 'info' ? 'General Information Page' : 'Activity Achievement/Gallery Page'}\n`;
                prompt += `Title: ${title}\n`;
                prompt += `Main Text: ${content}\n`;
                
                if (images) prompt += `Image URLs (Create a responsive grid if multiple): ${images}\n`;
                if (youtube) prompt += `YouTube Link (Embed this): ${youtube}\n`;
                if (links) prompt += `External Links (Create buttons): ${links}\n`;

                prompt += `\n--- OUTPUT REQUIREMENTS ---\n`;
                if (pageType === 'info') {
                    prompt += `1. Create a clean layout with the title, main text, video (if any), and then images at the bottom or side.\n`;
                    prompt += `2. Translate the text to formal, welcoming English suitable for international students.\n`;
                } else {
                    prompt += `1. Create a "Card" or "Gallery" layout.\n`;
                    prompt += `2. Summarize the text into catchy captions if it's long.\n`;
                    prompt += `3. Treat this as a showcase of school achievements.\n`;
                }
                
                prompt += `4. Ensure all images have 'alt' tags in English.\n`;
                prompt += `5. Return ONLY the HTML code.`;

                setGeneratedPrompt(prompt);
            };

            useEffect(() => {
                generatePromptText();
            }, [title, content, images, youtube, links, pageType]);

            const copyToClipboard = () => {
                navigator.clipboard.writeText(generatedPrompt);
                setCopyStatus('Copied!');
                setTimeout(() => setCopyStatus('Copy Prompt'), 2000);
            };

            return (
                <div className="min-h-screen bg-slate-50 p-4 md:p-8 font-sans text-slate-800">
                    <div className="max-w-6xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden border border-slate-200">
                        
                        {/* Header */}
                        <header className="bg-blue-900 text-white p-6 flex flex-col md:flex-row justify-between items-center gap-4">
                            <div>
                                <h1 className="text-2xl font-bold flex items-center gap-2">
                                    <IconLayout />
                                    School Web Assistant for R-page
                                </h1>
                                <p className="text-blue-200 text-sm mt-1">Generate prompts for Gemini to create English pages</p>
                            </div>
                            <div className="flex gap-2 bg-blue-800 p-1 rounded-lg">
                                <button 
                                    onClick={() => setActiveTab('generator')}
                                    className={`px-4 py-2 rounded-md font-medium transition-colors flex items-center gap-2 ${activeTab === 'generator' ? 'bg-white text-blue-900 shadow' : 'text-blue-200 hover:text-white'}`}
                                >
                                    <IconCode /> Generator
                                </button>
                                <button 
                                    onClick={() => setActiveTab('preview')}
                                    className={`px-4 py-2 rounded-md font-medium transition-colors flex items-center gap-2 ${activeTab === 'preview' ? 'bg-white text-blue-900 shadow' : 'text-blue-200 hover:text-white'}`}
                                >
                                    <IconEye /> HTML Previewer
                                </button>
                            </div>
                        </header>

                        {/* Content */}
                        {activeTab === 'generator' ? (
                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-0 divide-y lg:divide-y-0 lg:divide-x divide-slate-200">
                                
                                {/* Input Form */}
                                <div className="p-6 space-y-6">
                                    <div className="bg-blue-50 border border-blue-100 p-4 rounded-lg">
                                        <label className="block text-sm font-bold text-blue-900 mb-2">1. Select Page Type</label>
                                        <div className="flex flex-wrap gap-4">
                                            <label className="flex items-center gap-2 cursor-pointer">
                                                <input 
                                                    type="radio" 
                                                    name="type" 
                                                    checked={pageType === 'info'} 
                                                    onChange={() => setPageType('info')}
                                                    className="w-4 h-4 text-blue-600 focus:ring-blue-500"
                                                />
                                                <span className="font-medium">Information Page (一般資訊)</span>
                                            </label>
                                            <label className="flex items-center gap-2 cursor-pointer">
                                                <input 
                                                    type="radio" 
                                                    name="type" 
                                                    checked={pageType === 'activity'} 
                                                    onChange={() => setPageType('activity')}
                                                    className="w-4 h-4 text-blue-600 focus:ring-blue-500"
                                                />
                                                <span className="font-medium">Activity/Gallery (活動成果)</span>
                                            </label>
                                        </div>
                                    </div>

                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-semibold text-slate-700 mb-1">Chinese Title (標題)</label>
                                            <input 
                                                type="text" 
                                                value={title} 
                                                onChange={(e) => setTitle(e.target.value)}
                                                placeholder="e.g., 2024 國際交流成果展" 
                                                className="w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-semibold text-slate-700 mb-1">Content (內文 - 中文)</label>
                                            <textarea 
                                                value={content} 
                                                onChange={(e) => setContent(e.target.value)}
                                                placeholder="貼上您的中文內文..." 
                                                rows={6}
                                                className="w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-semibold text-slate-700 mb-1 flex items-center gap-2">
                                                <IconImage /> Image URLs (逗號分隔)
                                            </label>
                                            <input 
                                                type="text" 
                                                value={images} 
                                                onChange={(e) => setImages(e.target.value)}
                                                placeholder="https://cloud.../img1.jpg, https://cloud.../img2.jpg" 
                                                className="w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-semibold text-slate-700 mb-1 flex items-center gap-2">
                                                <IconYoutube /> YouTube Link
                                            </label>
                                            <input 
                                                type="text" 
                                                value={youtube} 
                                                onChange={(e) => setYoutube(e.target.value)}
                                                placeholder="https://www.youtube.com/watch?v=..." 
                                                className="w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"
                                            />
                                        </div>
                                        
                                         <div>
                                            <label className="block text-sm font-semibold text-slate-700 mb-1 flex items-center gap-2">
                                                <IconLink /> External Links (Text|URL, Text|URL)
                                            </label>
                                            <input 
                                                type="text" 
                                                value={links} 
                                                onChange={(e) => setLinks(e.target.value)}
                                                placeholder="報名表單|http://..., 下載簡章|http://..." 
                                                className="w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"
                                            />
                                        </div>
                                    </div>
                                </div>

                                {/* Prompt Output */}
                                <div className="p-6 bg-slate-50 flex flex-col h-full border-t lg:border-t-0">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="text-lg font-bold text-slate-800">2. Generated Gemini Prompt</h3>
                                        <button 
                                            onClick={copyToClipboard}
                                            className="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded shadow-sm text-sm font-medium flex items-center gap-2 transition-colors"
                                        >
                                            <IconCopy /> {copyStatus}
                                        </button>
                                    </div>
                                    
                                    <div className="flex-grow relative">
                                        <textarea 
                                            readOnly 
                                            value={generatedPrompt}
                                            className="w-full h-full min-h-[400px] p-4 font-mono text-sm bg-slate-800 text-slate-200 rounded-lg border border-slate-700 focus:outline-none resize-none"
                                        />
                                    </div>
                                    <p className="text-sm text-slate-500 mt-4">
                                        <strong>How to use:</strong> Copy text → Paste to Gemini → Copy Gemini's HTML → Paste in Preview Tab.
                                    </p>
                                </div>
                            </div>
                        ) : (
                            /* Preview Tab */
                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-0 divide-y lg:divide-y-0 lg:divide-x divide-slate-200 h-auto lg:h-[calc(100vh-150px)]">
                                <div className="p-6 flex flex-col h-[500px] lg:h-full">
                                    <label className="block text-sm font-bold text-slate-700 mb-2">3. Paste Gemini's HTML Output Here</label>
                                    <textarea 
                                        value={previewHtml}
                                        onChange={(e) => setPreviewHtml(e.target.value)}
                                        placeholder="Paste the code starting with <style>... or <div class='r-page-content'>..."
                                        className="w-full flex-grow p-4 font-mono text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none resize-none"
                                    />
                                </div>
                                <div className="p-6 bg-white overflow-y-auto h-[500px] lg:h-full">
                                    <label className="block text-sm font-bold text-slate-700 mb-2 pb-2 border-b">Live Preview</label>
                                    <div 
                                        className="preview-container"
                                        dangerouslySetInnerHTML={{ __html: previewHtml }} 
                                    />
                                    {!previewHtml && (
                                        <div className="h-64 flex flex-col items-center justify-center text-slate-400 border-2 border-dashed border-slate-200 rounded-lg mt-4">
                                            <IconEye />
                                            <p className="mt-2">Preview area is empty</p>
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}

                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<SchoolWebGenerator />);
    </script>
</body>
</html>